!function(e,n,t){var i={};if(i.UA=function(){var n=navigator.userAgent.toLowerCase(),t={};return t.inWdj="undefined"!=typeof e.campaignPlugin&&e.campaignPlugin,t.inWechat=!!n.match(/micromessenger/),t.inIos=!!n.match(/(iphone|ipod|ipad)/),t.inAndroid=!!n.match(/(android)/),t.inWp=!!n.match(/(windows phone)/),t.inSymbian=!!n.match(/(symbianos)/),t.inMac=0===navigator.platform.indexOf("Mac"),t.inWindows=0===navigator.platform.indexOf("Win"),t.inIphone=!!n.match(/(iphone)/),t.inIpad=!!n.match(/(ipad)/),t.inMobile=t.inIos||t.inAndroid||t.inWp||t.inSymbian,t.inPC=!(t.inIos||t.inAndroid||t.inWp||t.inSymbian),t.isRetina="undefined"!=typeof e.campaignPlugin&&e.devicePixelRatio>1,t.inWindow=t.inWindows,t}(),i.inPC=i.UA.inPC,i.UA.inWdj){var a=e.campaignPlugin;i.runSystemShare=function(e,n){e=e||"豌豆荚",n=n||"你的手机娱乐中心",a.share(e,n)},i.runAppShare=function(e,n,t,i,o){e=e||"豌豆荚",n=n||"你的手机娱乐中心",t=t||"http://static.wdjimg.com/www/images/www/p4.png",i=i||"http://www.wandoujia.com/",o=o||"SINA_WEIBO",a.shareTo(e,n,t,i,o)},i.openInBrowser=function(e){a.openInBrowser(e)},i.getUDID=function(){return a.getUDID()},i.getUID=function(){return a.getUID()},i.getAvatar=function(){return a.getAvatar()},i.getUserEmail=function(){return a.getUserEmail()},i.getNickName=function(){return a.getNickName()},i.getUserAuth=function(){return a.getUserAuth()},i.isLogin=function(){return a.isLogin()},i.getPhoneNumber=function(){return a.getPhoneNumber()},i.openUserDetail=function(e){a.openUserDetail(e)},i.isInstalled=function(e){return a.isInstalled(e)},i.isUpgradable=function(e){return a.isUpgradable(e)},i.getAppState=function(e){return a.getAppState(e)},i.getAppVersionCode=function(e){return a.getAppVersionCode(e)},i.getAppVersionName=function(e){return a.getAppVersionName(e)},i.openApp=function(e){a.openApp(e)},i.openAppDetail=function(e){a.openAppDetail(e)},i.openAppDetailWithoutAward=function(e){a.openAppDetailWithoutAward(e)},i.sendIntent=function(e){a.startActivity(e)},i.openVideoDetail=function(e){a.startActivity("wdj://detail/video/"+e+"?video_type=")},i.openEbookDetail=function(e){a.startActivity("wdj://detail/ebbok/"+e)},i.searchWords=function(e){a.startActivity("wdj://search?q="+e)},i.openSubscribeDetail=function(e,n){a.startActivity("wdj://detail/subscribe/publisher/"+n+"/"+e)},i.openSubscribeSubset=function(e){if("undefined"!=typeof a.openSubscribeSubset)a.openSubscribeSubset(e);else{var n="intent://subscribe.wandoujia.com/list/"+e+"#Intent;scheme=http;action=android.intent.action.MAIN;end";a.startActivity(n)}},i.loginAccount=function(){"undefined"!=typeof i.loginAccount?a.loginAccount():a.startActivity("intent:#Intent;component=com.wandoujia.phoenix2/com.wandoujia.p4.account.activity.PhoenixAccountActivity;end")},i.choseLoginAccount=function(){a.startActivity("intent://account.wandoujia.com/android/login#Intent;scheme=https;action=android.intent.action.MAIN;end")},i.installApp=function(e,t){function i(n){if(t&&"function"==typeof t)var i=setInterval(function(){o=a.isInstalled(e.packageName),o&&(clearInterval(i),i=0,t(n))},1500)}var o=!1;typeof a.installByPackage!==n?(a.installByPackage(e.packageName),i({error:0,message:"安装成功"})):e.packageName&&e.downloadUrl&&e.appName&&e.iconUrl?(a.install(e.packageName,e.downloadUrl,e.appName,e.iconUrl,e.size),i({error:0,message:"安装成功"})):t&&"function"==typeof t&&t({error:1,message:"缺少必要参数"})},i.reload=function(){a.reload()},i.setOrientation=function(e){a.setOrientation(e)},i.closeWebView=function(){a.closeWebView()},i.openNewWebView=function(e,n,t,i,o){e=e||"http://www.wandoujia.com",n=n||"豌豆荚",t=t||!0,i=i||!0,o=o||!1,a.openNewWebView(e,n,t,i,o)},i.getVersionCode=function(){return a.getVersionCode()},i.getVersionName=function(){return a.getVersionName()},i.getFullVersionName=function(){return a.getFullVersionName()},i.getIMEI=function(){return a.getIMEI()},i.getBrand=function(){return a.getBrand()},i.getNetworkType=function(){return a.getNetworkType()},i.getLocaleLanguage=function(){return a.getLocaleLanguage()},i.getLocaleCountry=function(){return a.getLocaleCountry()},i.getSDKVersion=function(){return a.getSDKVersionInt()},i.setClipboardText=function(e){return a.setClipboardText(e)},i.toast=function(e){a.toast(e)}}i.constant={telReg:/^0?(13[0-9]|15[0-9]|18[0-9]|14[57]|17[0])[0-9]{8}$/},i.api={needle:"http://www.wandoujia.com/needle/source/",apps:"http://www.wandoujia.com/api/apps/apps",appsOptFields:"?opt_fields=title,icons.*,apks.*.size,apks.*.bytes,apks.*.downloadUrl.*.url,apks.*.creation,installedCountStr,apks.*.versionName,apks.*.versionCode",itemlist:"http://www.wandoujia.com/api/subscribe/itemlist/",subscribe:"http://www.wandoujia.com/api/subscribe/subscriber/subscribe",unsubscribe:"http://www.wandoujia.com/api/subscribe/subscriber/unsubscribe",subscribeStatus:"http://www.wandoujia.com/api/subscribe/publisher/ACCOUNT/"},i.getFeedListData=function(e,n){$.ajax({url:i.api.itemlist+e+"/summary",dataType:"json",success:function(e){n&&"function"==typeof n&&n(e)}})},i.getFeedItemsData=function(e,n){$.ajax({url:i.api.itemlist+e+"/item",dataType:"json",success:function(e){n&&"function"==typeof n&&n(e)}})},i.getSubscribeStatus=function(e,n){$.ajax({url:i.api.subscribeStatus+e,dataType:"json",success:function(e){n&&"function"==typeof n&&n(e)}})},i.subscribe=function(e,n){$.ajax({url:i.api.subscribe,dataType:"json",contentType:"application/json; charset=UTF-8",type:"POST",data:JSON.stringify([{type:"ACCOUNT",id:e}]),success:function(e){n&&"function"==typeof n&&n(e)}})},i.unsubscribe=function(e,n){var t=new XMLHttpRequest;t.open("POST",i.api.unsubscribe,!1),t.send(JSON.stringify([{type:"ACCOUNT",id:e,wdj_auth:$.cookie("wdj_auth")}]));t.getAllResponseHeaders().toLowerCase();200===t.status&&n&&"function"==typeof n&&n()},i.pushGaEvent=function(e,n,t,i){e=e||"",n=n||"",t=t||"",i=parseInt(i,10)||0,"undefined"!=typeof ga&&ga?ga("send","event",e,n,t,i):"undefined"!=typeof _gaq&&_gaq&&_gaq.push(["_trackEvent",e,n,t,i])},i.setFullScreenHeight=function(n){var t=e.innerHeight;n=n||480,n>t?setTimeout(function(){t=e.innerHeight,n>t&&(t=n),document.body.style.height=t+"px"},1e3):document.body.style.height=t+"px"},i.parseQueryString=function(){var n=e.location.search,t={};return n.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,n,i,a){t[n]=a}),t},i.wechatWebviewShareSetup=function(e,n){$.ajax({url:"http://who.wandoujia.com/wx-corp/js-sdk",type:"POST",data:{url:location.href.split("#")[0]}}).done(function(t){wx.config({debug:!1,appId:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","hideMenuItems"]}),wx.ready(function(){wx.onMenuShareTimeline({title:e.title,link:e.link,imgUrl:e.imgUrl,success:function(){e.successCallback&&"function"==typeof e.successCallback&&e.successCallback()},cancel:function(){}}),wx.onMenuShareAppMessage({title:n.title,desc:n.desc,link:n.link,imgUrl:n.imgUrl,type:"",dataUrl:"",success:function(){n.successCallback&&"function"==typeof n.successCallback&&n.successCallback()},cancel:function(){}})})})},i.shareButtonSetup=function(e,n,t){var a="http://service.weibo.com/share/share.php?appkey=1483181040&relateUid=1727978503&url="+encodeURIComponent(e.shortLink||e.link)+"&title="+encodeURIComponent(e.desc)+"&pic="+e.imgUrl;i.UA.inWdj?($(e.element).click(function(){e.successCallback("P4-weibo-launch"),i.toast("正在打开微博，请稍候..."),i.runAppShare(null,e.desc,e.imgUrl,e.shortLink||e.link,"SINA_WEIBO")}),$(n.element).click(function(){n.successCallback("P4-wechatFriend-launch"),i.toast("正在打开微信，请稍候..."),i.runAppShare(n.title,n.desc,n.imgUrl,n.link,"WECHAT")}),$(t.element).click(function(){t.successCallback("P4-wechatTimeline-launch"),i.toast("正在打开微信，请稍候..."),i.runAppShare(t.title,t.title,t.imgUrl,t.link,"WECHAT_TIMELINE")})):($(e.element).click(function(){e.successCallback("weibo-redirect"),location.href=a}),$(n.element+", "+t.element).click(function(e){i.UA.inWechat?$(this).is(n.element)?(n.successCallback("wechat-wechatFriend-tips"),n.tips()):(t.successCallback("wechat-wechatTimeline-tips"),t.tips()):$(this).is(n.element)?(n.successCallback("other-wechatFriend-tips"),n.qrcode()):(t.successCallback("other-wechatTimeline-qrcode"),t.qrcode())}))};var o=e.campaignTools;e.campaignTools=i,i.noConflict=function(){return e.campaignTools=o,i},"function"==typeof t&&t.amd&&t("campaignTools",[],function(){return i})}(this);